<!-- <!DOCTYPE html>
<html>
  <head>
    <title>Screenshot Layar dengan JavaScript</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  </head>
  <body>
    <h1>p</h1>
    <button onclick="ambilScreenshot()">Ambil Screenshot</button>
    <div id="hasil"></div>
    <script>
      function ambilScreenshot() {
        html2canvas(document.body).then(function (canvas) {
          // Mengonversi kanvas ke format gambar PNG
          var dataURL = canvas.toDataURL("image/png");

          // Membuat elemen gambar untuk menampilkan tangkapan layar
          var img = new Image();
          img.src = dataURL;

          // Menambahkan elemen gambar ke dalam dokumen
          document.getElementById("hasil").appendChild(img);
        });
      }
    </script>
  </body>
</html> -->

<!DOCTYPE html>
<html>
  <head>
    <title>Screenshot Layar dengan JavaScript</title>
    <!-- Menambahkan pustaka html2canvas -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  </head>
  <body>
    <h1>Contoh Halaman</h1>
    <!-- Tombol untuk mengambil screenshot -->
    <button onclick="ambilScreenshot()">Ambil Screenshot</button>
    <!-- Menampilkan hasil tangkapan layar di sini -->
    <div id="hasil"></div>
    <script>
      // Fungsi untuk mengambil screenshot
      function ambilScreenshot() {
        // Menggunakan html2canvas untuk membuat tangkapan layar dari body
        html2canvas(document.body).then(function (canvas) {
          // Mengonversi kanvas ke format gambar PNG
          var dataURL = canvas.toDataURL("image/png");

          // Membuat elemen <a> untuk mendownload gambar
          var a = document.createElement("a");
          a.href = dataURL;
          a.download = "screenshot.png"; // Nama file yang akan didownload

          // Membuat elemen gambar untuk watermark
          var watermark = new Image();
          watermark.src = "logo.png"; // Ganti dengan lokasi logo Anda
          watermark.onload = function () {
            // Membuat kanvas untuk menggabungkan tangkapan layar dan watermark
            var watermarkCanvas = document.createElement("canvas");
            watermarkCanvas.width = canvas.width;
            watermarkCanvas.height = canvas.height;

            var context = watermarkCanvas.getContext("2d");

            // Menggambar tangkapan layar ke kanvas
            context.drawImage(canvas, 0, 0);

            // Menambahkan watermark di pojok kanan bawah
            var watermarkPositionX = canvas.width - watermark.width - 10; // Jarak dari tepi kanan
            var watermarkPositionY = canvas.height - watermark.height - 10; // Jarak dari tepi bawah
            context.drawImage(
              watermark,
              watermarkPositionX,
              watermarkPositionY
            );

            // Mengonversi kanvas dengan watermark ke format gambar PNG
            var finalDataURL = watermarkCanvas.toDataURL("image/png");

            // Memasukkan data URL ke elemen <a> untuk download
            a.href = finalDataURL;

            // Mengklik elemen <a> untuk memulai proses download
            a.click();
          };
        });
      }
    </script>
  </body>
</html>
